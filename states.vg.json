{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": {
      "url": "https://raw.githubusercontent.com/JunThye0206/Data-Visualisation-2/refs/heads/main/Data/states.csv"
    },
    "params": [
      {
        "name": "state_selection",
        "bind": {
          "input": "select",
          "options": [
            null,
            "Victoria",
            "Queensland",
            "South Australia",
            "Western Australia",
            "Tasmania",
            "Northern Territory"
          ],
          "labels": [
            "New South Wales",
            "Victoria",
            "Queensland",
            "South Australia",
            "Western Australia",
            "Tasmania",
            "Northern Territory"
          ],
          "name": "Select State: "
        }
      }
    ],
    "vconcat":[{"title":"Expediture of Selected State","width": 700,"layer": [
      {
        "transform": [
          {"filter": "state_selection == null"},
        {
            "fold": [
              "Base Metal",
              "Gold",
              "Iron ore",
              "Mineral sands",
              "Uranium",
              "Coal",
              "Diamonds"
            ],
            "as": ["Mineral", "Expenditure"]
          },
          {"filter": "datum.State == 'New South Wales'"}
        ],
        "mark": "line",
        "encoding": {
          "x": {
            "field": "Date",
            "type": "temporal",
            "title": "Date",
            "scale": {"domain": {"selection": "brush"}}
          },
          "y": {
            "field": "Expenditure",
            "type": "quantitative",
            "title": "Expenditure"
          },
          "color": {
            "field": "Mineral",
            "scale": {
            "domain": [
            "Base Metal", "Iron ore", "Gold", "Mineral sands", "Uranium", "Coal", "Diamonds","New South Wales","Victoria","Queensland","South Australia","Western Australia","Tasmania","Northern Territory"
          ],
            "range": [
             "#8c510a", "#bf812d","#d8b365", "#d0d3a5", "#c7eae5", "#5ab4ac", "#01665e",
              "#b0bb9b", "#364d37", "#656f51", "#dfa03f", "#ba9474", "#511012","#3e5461"
                ]
            }
          },
          "tooltip": [
            {"field": "State", "type": "ordinal", "title": "State"},
            {"field": "Date", "type": "temporal", "title": "Date"},
            {"field": "Mineral", "type": "ordinal", "title": "Mineral"},
            {"field": "Expenditure", "type": "quantitative", "title": "Expenditure"}
          ]
        }
      },
      {
        "transform": [
          {"filter": "state_selection != null"},
          {
            "fold": [
              "Base Metal",
              "Gold",
              "Iron ore",
              "Mineral sands",
              "Uranium",
              "Coal",
              "Diamonds"
            ],
            "as": ["Mineral", "Expenditure"]
          },
          {"filter": "datum.State == state_selection"}
        ],
        "mark": "line",
        "encoding": {
          "x": {
                  "field": "Date",
                  "type": "temporal",
                  "title": "Date",
                  "axis": {
                  "domain": false,
                  "format": "%b %Y",
                  "tickSize": 0,
                  "labelAngle": -45,
                  "title": ""
                },
                "scale": {"domain": {"selection": "brush"}}
                },
          "y": {
            "field": "Expenditure",
            "type": "quantitative",
            "title": "Expenditure"
          },
          "color": {
            "field": "Mineral",
            "scale": {
            "domain": [
            "Base Metal", "Gold", "Iron ore", "Mineral sands", "Uranium", "Coal", "Diamonds"
          ],
            "range": [
              "#797d62", "#9b9b7a", "#d9ae94", "#d0d3a5", "#ffcb69", "#d08c60","#997b66"
                ]
            }
          },
          "tooltip": [
            {"field": "State", "type": "ordinal", "title": "State"},
            {"field": "Date", "type": "temporal", "title": "Date"},
            {"field": "Mineral", "type": "ordinal", "title": "Mineral"},
            {"field": "Expenditure", "type": "quantitative", "title": "Expenditure"}
          ]
        }
      }
    ]}
    ,{
      "title":"Expenditure of All States",
      "width": 700,"height": 100,
      "mark": "line",
              "selection": {"brush": {"type": "interval", "encodings": ["x"]}},
              "encoding": {
                "x": {
                  "field": "Date",
                  "type": "temporal",
                  "title": "Date",
                  "axis": {
                  "domain": false,
                  "format": "%b %Y",
                  "tickSize": 0,
                  "labelAngle": -45,
                  "title": ""
                }
                },
                "y": {
                  "aggregate": "sum",
                  "field": "Total",
                  "type": "quantitative",
                  "title": "Total Expenditure"
                },
                "color": {
                  "field": "State",
                  "type": "nominal",
                  "legend": {
                    "title": "States"
                  }
                },
                "tooltip": [
                  {"field": "State", "type": "ordinal", "title": "State"},
                  {"field": "Date", "type": "temporal", "title": "Date"},
                  {"field": "Total", "type": "quantitative", "title": "Total"}
                ]
              }
    }
    ],
    "config": {
    "background": "#F7F3E3" 
  }
    
  }
  